/*global jQuery, document, redux_opts, confirm, relid:true, console, jsonView */function verify_fold(e){jQuery(document).ready(function(t){if(e.hasClass("redux-info")||e.hasClass("redux-typography"))return;var n=e.attr("id"),r=e.val();if(redux_opts.folds[n]&&redux_opts.folds[n].children){var i={};t.each(redux_opts.folds[n].children,function(e,s){t.each(s,function(t,s){i[s]||(i[s]={show:!1,hidden:!1});if(e==r||i[s]===!0)i[s].show=!0;i[s].show===!0&&jQuery("#"+n).parents("tr:first").hasClass("hiddenFold")&&(i[s].show=!1),i[s].show===!0&&jQuery("#"+redux_opts.folds[n].parent).hasClass("hiddenFold")&&(i[s].show=!1),i[s].hidden=jQuery("#"+s).parents("tr:first").hasClass("hiddenFold")})}),t.each(i,function(e){var t=jQuery("#"+e).parents("tr:first");i[e].show===!0?(t.removeClass("hiddenFold"),t.fadeIn("medium",function(){redux_opts.folds[e]&&redux_opts.folds[e].children&&verify_fold(jQuery("#"+e))})):i[e].hidden===!1&&(t.addClass("hiddenFold"),t.fadeOut("medium",function(){redux_opts.folds[e].children&&verify_fold(jQuery("#"+e))}))})}})}function redux_change(e){e.hasClass("compiler")&&jQuery("#redux-compiler-hook").val(1),e.hasClass("foldParent")&&verify_fold(e),window.onbeforeunload=confirmOnPageExit;if(jQuery(e).hasClass("redux-field-error")){jQuery(e).removeClass("redux-field-error"),jQuery(e).parent().find(".redux-th-error").slideUp();var t=jQuery(e).closest(".redux-group-tab").attr("id"),n=!0;jQuery("#"+t+" .redux-field-error").each(function(){n=!1}),n&&(jQuery("#"+t+"_li .redux-menu-error").hide(),jQuery("#"+t+"_li .redux-group-tab-link-a").removeClass("hasError"))}jQuery("#redux-save-warn").slideDown()}jQuery.noConflict();var confirmOnPageExit=function(e){e=e||window.event;var t=redux_opts.save_pending;return e&&(e.returnValue=t),window.onbeforeunload=null,t};jQuery(document).ready(function(e){function t(e){return decodeURI(((new RegExp(e+"="+"(.+?)(&|$)")).exec(location.search)||[,""])[1])}function s(){var e=jQuery("#info_bar").width()-2;!jQuery("#info_bar").isOnScreen()&&!jQuery("#redux-footer-sticky").isOnScreen()?(jQuery("#redux-footer").css({position:"fixed",bottom:"0",width:e}),jQuery("#redux-footer").addClass("sticky-footer-fixed"),jQuery("#redux-sticky-padder").show()):(jQuery("#redux-footer").css({background:"#eee",position:"inherit",bottom:"inherit",width:"inherit"}),jQuery("#redux-sticky-padder").hide(),jQuery("#redux-footer").removeClass("sticky-footer-fixed"))}jQuery(".redux-action_bar, .redux-presets-bar").on("click",function(){window.onbeforeunload=null}),jQuery().tipsy&&e(".tips").tipsy({fade:!0,gravity:"s",opacity:.7}),jQuery(".redux-group-tab-link-a").click(function(){relid=jQuery(this).data("rel"),e.cookie("redux_current_tab",relid,{expires:7,path:"/"});var t=jQuery(".redux-group-tab-link-li.active .redux-group-tab-link-a").data("rel");jQuery("#"+t+"_section_group_li").removeClass("active"),jQuery("#"+t+"_section_group").hide(),jQuery("#"+relid+"_section_group").fadeIn(300,function(){s()}),jQuery("#"+relid+"_section_group_li").addClass("active")});var n=t("tab");n!==""?e.cookie("redux_current_tab_get")!==n&&(e.cookie("redux_current_tab",n,{expires:7,path:"/"}),e.cookie("redux_current_tab_get",n,{expires:7,path:"/"}),jQuery("#"+n+"_section_group_li").click()):e.cookie("redux_current_tab_get")!==""&&e.removeCookie("redux_current_tab_get");var r=jQuery("#"+e.cookie("redux_current_tab")+"_section_group_li_a");e.cookie("redux_current_tab")===null||typeof e.cookie("redux_current_tab")=="undefined"||r.length===0?jQuery(".redux-group-tab-link-a:first").click():r.click(),jQuery('input[name="'+redux_opts.opt_name+'[defaults]"]').click(function(){if(!confirm(redux_opts.reset_confirm))return!1;window.onbeforeunload=null}),jQuery("#expand_options").click(function(e){e.preventDefault();var t=jQuery("#expand_options"),n=jQuery("#redux-sidebar").width(),r=jQuery("#redux-group-menu .active a").data("rel")+"_section_group";return t.hasClass("expanded")?(t.removeClass("expanded"),jQuery("#redux-main").removeClass("expand"),jQuery("#redux-sidebar").stop().animate({"margin-left":"0px"},500),jQuery("#redux-main").stop().animate({"margin-left":n},500),jQuery(".redux-group-tab").each(function(){jQuery(this).attr("id")!==r&&jQuery(this).fadeOut("fast")})):(t.addClass("expanded"),jQuery("#redux-main").addClass("expand"),jQuery("#redux-sidebar").stop().animate({"margin-left":-n-2},500),jQuery("#redux-main").stop().animate({"margin-left":"0px"},500),jQuery(".redux-group-tab").fadeIn()),!1}),jQuery("#redux-import").click(function(e){if(jQuery("#import-code-value").val()===""&&jQuery("#import-link-value").val()==="")return e.preventDefault(),!1}),jQuery("#redux-save").is(":visible")&&jQuery("#redux-save").slideDown(),jQuery("#redux-imported").is(":visible")&&jQuery("#redux-imported").slideDown(),jQuery("input, textarea, select").on("change",function(){jQuery(this).hasClass("noUpdate")||redux_change(jQuery(this))}),jQuery("#redux-import-code-button").click(function(){jQuery("#redux-import-link-wrapper").is(":visible")&&(jQuery("#redux-import-link-wrapper").fadeOut("fast"),jQuery("#import-link-value").val("")),jQuery("#redux-import-code-wrapper").fadeIn("slow")}),jQuery("#redux-import-link-button").click(function(){jQuery("#redux-import-code-wrapper").is(":visible")&&(jQuery("#redux-import-code-wrapper").fadeOut("fast"),jQuery("#import-code-value").val("")),jQuery("#redux-import-link-wrapper").fadeIn("slow")}),jQuery("#redux-export-code-copy").click(function(){jQuery("#redux-export-link-value").is(":visible")&&jQuery("#redux-export-link-value").fadeOut("slow"),jQuery("#redux-export-code").toggle("fade")}),jQuery("#redux-export-link").click(function(){jQuery("#redux-export-code").is(":visible")&&jQuery("#redux-export-code").fadeOut("slow"),jQuery("#redux-export-link-value").toggle("fade")}),jQuery.fn.isOnScreen=function(){if(!window)return;var e=jQuery(window),t={top:e.scrollTop(),left:e.scrollLeft()};t.right=t.left+e.width(),t.bottom=t.top+e.height();var n=this.offset();return n.right=n.left+this.outerWidth(),n.bottom=n.top+this.outerHeight(),!(t.right<n.left||t.left>n.right||t.bottom<n.top||t.top>n.bottom)};var i=jQuery("#redux-footer").height();jQuery("#redux-sticky-padder").css({height:i}),jQuery(window).scroll(function(){s()}),jQuery(window).resize(function(){s()}),jQuery("#redux-save, #redux-imported").delay(4e3).slideUp(),jQuery("#redux-field-errors").delay(8e3).slideUp(),jQuery(".redux-save").click(function(){window.onbeforeunload=null}),jQuery(".fold").each(function(){jQuery(this).parents("tr:first").addClass("hiddenFold"),jQuery(this).parents("tr:first").hide()}),jQuery(".fold").promise().done(function(){jQuery(".foldParent").each(function(){var e=jQuery(this).attr("id");redux_opts.folds[e]&&(redux_opts.folds[e].parent||verify_fold(jQuery(this)))})}),e("#consolePrintObject").on("click",function(){console.log(jQuery.parseJSON(jQuery("#redux-object-json").html()))}),typeof jsonView=="function"&&jsonView("#redux-object-json","#redux-object-browser"),redux_opts.errors!==undefined&&(jQuery("#redux-field-errors span").html(redux_opts.errors.total),jQuery("#redux-field-errors").show(),jQuery.each(redux_opts.errors.errors,function(e,t){jQuery("#"+e+"_section_group_li_a").prepend('<span class="redux-menu-error">'+t.total+"</span>"),jQuery("#"+e+"_section_group_li_a").addClass("hasError"),jQuery.each(t.errors,function(e,t){jQuery("#"+t.id).addClass("redux-field-error"),jQuery("#"+t.id).parents("td:first").append('<span class="redux-th-error">'+t.msg+"</span>")})})),redux_opts.warnings!==undefined&&(jQuery("#redux-field-warnings span").html(redux_opts.warnings.total),jQuery("#redux-field-warnings").show(),jQuery.each(redux_opts.warnings.warnings,function(e,t){jQuery("#"+e+"_section_group_li_a").prepend('<span class="redux-menu-warning">'+t.total+"</span>"),jQuery("#"+e+"_section_group_li_a").addClass("hasWarning"),jQuery.each(t.warnings,function(e,t){jQuery("#"+t.id).addClass("redux-field-warning"),jQuery("#"+t.id).parents("td:first").append('<span class="redux-th-warning">'+t.msg+"</span>")})})),jQuery(".redux-section-tabs div").hide(),jQuery(".redux-section-tabs div:first").show(),jQuery(".redux-section-tabs ul li:first").addClass("active"),jQuery(".redux-section-tabs ul li a").click(function(){jQuery(".redux-section-tabs ul li").removeClass("active"),jQuery(this).parent().addClass("active");var t=e(this).attr("href");return jQuery(".redux-section-tabs div").hide(),jQuery(t).fadeIn(),!1})});